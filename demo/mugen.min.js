/*
  Mini UnGame ENgine (MUGEN) ver 0.18
  Copyright 2019-2022 Brian James

  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
var MUGEN=function(){var c,i,n="titleScreenImageURL",s="preGameScreenImageURLs",e="playUntilScore",a="postGameScreenImageURLs",r="heroSpeed",u="typesOfNPC",d="npcSpeed",t="timeBetweenNPCs",m="jumpHeight",l="actionDuration",o="heroCollisionRadius",p="actionRadius",h="npcMoveToX",f="maxSimultaneousNPCs",y="npcCollisionRadius",g="pointsPerNPCInteracted",v="removeNPCAfterInteracted",C="removeNPCAfterInteractedDelay",L="numOfCollectables",b="pointsPerCollectable",w="collectableRadius",x="removeCollectableAfterCollected",S="removeCollectableAfterCollectedDelay",W="onGameStart",R="onNPCSpawn",T="onNPCWasInteracted",P="onCollectableWasCollected",E="onHeroWalk",N="onHeroAction",k="onHeroJump",H="makeResponsive",M="autoPlay",A={monsterSpeed:"npcSpeed",attackRadius:"actionRadius",timeBetweenMonsters:"timeBetweenNPCs",attackDuration:"actionDuration",heroHitRadius:"heroCollisionRadius",monsterMoveToX:"npcMoveToX",maxSimultaneousMonsters:"maxSimultaneousNPCs",monsterHitRadius:"npcCollisionRadius",pointsPerMonsterKilled:"pointsPerNPCInteracted",onMonsterSpawn:"onNPCSpawn",onMonsterWasHit:"onNPCWasInteracted",onHeroAttack:"onHeroAction"},I=[n,s,e,a,r,u,d,t,m,l,p,o,h,f,y,g,v,C,L,w,b,x,S,W,R,T,P,N,E,k,H,M],B={titleScreenImageURL:null,preGameScreenImageURLs:null,playUntilScore:null,postGameScreenImageURLs:null,heroSpeed:220,typesOfNPC:1,npcSpeed:450,timeBetweenNPCs:2600,jumpHeight:145,actionDuration:600,heroCollisionRadius:50,actionRadius:50,npcMoveToX:null,maxSimultaneousNPCs:10,npcCollisionRadius:50,pointsPerNPCInteracted:1,removeNPCAfterInteracted:!0,removeNPCAfterInteractedDelay:500,numOfCollectables:0,collectableRadius:100,pointsPerCollectable:1,removeCollectableAfterCollected:!1,removeCollectableAfterCollectedDelay:0,onGameStart:null,onNPCSpawn:null,onNPCWasInteracted:null,onCollectableWasCollected:null,onHeroAction:null,onHeroWalk:null,onHeroJump:null,makeResponsive:!1,autoPlay:!1},F={},q=0,z=0,G=0,X=0,U="",V=atob("TWFkZSB3aXRoIE1VR0VO"),D=atob("aHR0cHM6Ly9naXRodWIuY29tL21hbGxvYy1lcnJvci9tdWdlbi1kaXN0cmlidXRpb24="),O=atob("X2JsYW5r"),Y={"font-family":"Helvetica, Arial, sans-serif","font-size":"14px",color:"white","z-index":"1",position:"absolute",bottom:"4px",right:"8px","text-shadow":"0 0 5px rgba(0,0,0,0.4)","text-decoration":"none",padding:"8px"},j=null,J=null,K=null,Z=null,Q=document.querySelector("body"),$=document.querySelector(".instructions"),_=null,tt="titleScreen",et="preGameScreen",nt="postGameScreen",lt="hero",ot="walking",it="left",st="idling",at="jumping",ct="doing-action",rt="npc",ut="collectable",dt="was-collected",mt="preload-image",pt="was-interacted",ht=!1,ft=null,yt=null;this.MUGEN=function(){},this.initialize=function(t){Pt(t),te(),F[M]||(ee(),$.classList.add("show")),zt(),Rt(),Wt(),_t(),St();let e=!1;null!==F[n]&&(e=!0,Nt()),null!==F[s]&&(e=!0,kt()),null!==F[a]&&Ht(),e||Et()};function gt(t){t>Z.offsetLeft?(Z.className="",jt(Z),Z.classList.add(lt,ot)):(Z.className="",jt(Z),Z.classList.add(lt,ot,it));var e=Math.abs(t-Z.offsetLeft),n=F[r];document.documentElement.clientWidth<c&&(n*=document.documentElement.clientWidth/c),n=e/n*1e3,Z.style["transition-duration"]=n+"ms",Z.style.left=t+"px",clearTimeout(ft),ft=setTimeout(function(){Yt(),F[M]&&Jt()},n),null!==F[E]&&setTimeout(F[E],0)}function vt(t){clearTimeout(ft),Z.style["transition-duration"]="0ms";var e=Z.getBoundingClientRect().left+Z.scrollLeft-(Q.getBoundingClientRect().left+Q.scrollLeft);Z.style.left=e+"px",Vt();var n=F[m],l=F[r];document.documentElement.clientWidth<c&&(n*=document.documentElement.clientWidth/c,l*=document.documentElement.clientWidth/c);var o=n/l*1e3/2;Z.style["transition-duration"]=o+"ms",l="",Math.abs(t-e)>.3*Z.clientWidth&&(t<e?(l="left",Z.classList.add(it)):l="right");var i=50;document.documentElement.clientWidth<c&&(i*=document.documentElement.clientWidth/c),"left"===l?Z.style.left=e-i+"px":"right"===l&&(Z.style.left=e+i+"px"),Z.style["margin-bottom"]=n+"px",setTimeout(function(t){Z.style["margin-bottom"]=0,"left"===t?Z.style.left=e-2*i+"px":"right"===t&&(Z.style.left=e+2*i+"px"),Z.classList.contains(ct)||(ft=setTimeout(function(){Yt(),F[M]&&Jt()},o))},o,l),null!==F[k]&&setTimeout(F[k],0)}function Ct(t){clearTimeout(ft);var e=Z.classList.contains(at),n=Z.getBoundingClientRect().left+Z.scrollLeft-(Q.getBoundingClientRect().left+Q.scrollLeft);e||(Z.style["transition-duration"]="0ms",Ot(),Z.style.left=n+"px"),Dt(),t<n+.5*Z.clientWidth?Z.classList.add(it):Z.classList.remove(it),ft=setTimeout(function(){Yt(),F[M]&&Jt()},F[l]),null!==F[N]&&setTimeout(F[N],0)}function Lt(t,e,n,l){var o,i;t.classList.contains(tt)?(J.style.opacity="0",J.style["pointer-events"]="none",null!==F[s]&&0<F[s].length?setTimeout(function(){J.remove()},510):setTimeout(function(){J.remove(),Et()},510)):t.classList.contains(et)?((i=t).style.opacity="0",i.style["pointer-events"]="none",++q<F[s].length?setTimeout(function(){i.remove()},510):setTimeout(function(){i.remove(),Et()},510)):t.classList.contains(nt)?(o=t,++z<F[a].length&&(o.style.opacity="0",o.style["pointer-events"]="none",setTimeout(function(){o.remove()},510))):($.classList.remove("show"),t.classList.contains(rt)||(l?Z.classList.contains(ct)||Ct(e):Z.classList.contains(at)||Z.classList.contains(ct)||(e=e-.5*Z.clientWidth,(n>=Z.offsetTop?gt:vt)(e))))}function bt(t){ht||(Q.removeEventListener("touchstart",Zt),ht=!0);var e=t.clientX-(t.target.getBoundingClientRect().left+Q.scrollLeft),n=t.clientY-(t.target.getBoundingClientRect().top+Q.scrollTop),l=t.shiftKey;return Lt(t.target,e,n,l),!1}function wt(t){}function xt(t){F[H]&&Ut()}var St=function(){var t=oe();t.classList.add(rt,pt),t.style.visibility="hidden",Q.appendChild(t),(U=window.getComputedStyle(t).getPropertyValue("transition")).split(",").forEach(function(t){var e=(t=t.trim()).split(" "),t=1e3*parseFloat(e[1]);0;e=1e3*parseFloat(e[3]);0}),t.remove()},Wt=function(){c=K.clientWidth,i=K.clientHeight,F[H]&&Ut()},Rt=function(){if((K=oe()).classList.add("background"),Q.appendChild(K),Q.style.width=K.clientWidth+"px",Q.style.height=K.clientHeight+"px",(Z=oe()).classList.add(lt,st),Q.appendChild(Z),!isNaN(F[L]))for(let e=0;e<F[L];e++){let t=document.createElement("div");t.classList.add(ut),t.classList.add(ut+"-"+e),Q.appendChild(t)}(_=oe()).classList.add("score"),Q.appendChild(_),Tt()},Tt=function(){(j=ie()).innerHTML=V,j.href=D,j.target=O,se(j,Y),Q.appendChild(j)},Pt=function(t){for(var e=0;e<I.length;e++){var n=I[e];F[n]=B[n]}void 0!==t&&Gt(t),ne()},Et=function(){yt=setInterval(Kt,F[t]),F[M]&&Jt(),null!==F[W]&&setTimeout(F[W],0),window.requestAnimationFrame(Mt)},Nt=function(){var t={position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-image":"url('"+F[n]+"')","background-size":"contain","background-repeat":"no-repeat","background-color":"black",opacity:"1",transition:"opacity 500ms ease-in-out","z-index":"9999"};(J=oe()).classList.add(tt),se(J,t),Q.appendChild(J)},kt=function(){for(let e=0;e<F[s].length;e++){var n={position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-image":"url('"+F[s][e]+"')","background-size":"contain","background-repeat":"no-repeat","background-color":"black",opacity:"1",transition:"opacity 500ms ease-in-out","z-index":9998-e+""};let t=oe();t.classList.add(et),se(t,n),Q.appendChild(t)}},Ht=function(){for(let e=0;e<F[a].length;e++){var n={position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-image":"url('"+F[a][e]+"')","background-size":"contain","background-repeat":"no-repeat","background-color":"black",opacity:"0","pointer-events":"none",transition:"opacity 500ms ease-in-out","z-index":9999-e+""};let t=oe();t.classList.add(nt),se(t,n),Q.appendChild(t)}},Mt=function(){var t=document.querySelectorAll(".npc"),e=document.querySelectorAll("."+ut),t=At({collectables:e,monsters:t});qt(t.monsters),Ft(t.collectables),window.requestAnimationFrame(Mt)},At=function(t){var e=t.monsters,n=t.collectables,t=Z.getBoundingClientRect(),l=Q.getBoundingClientRect(),o={};o.x=t.left+Z.scrollLeft-(l.left+Q.scrollLeft)+.5*t.width,o.y=t.top+Z.scrollTop-(l.top+Q.scrollTop)+.5*t.height;var i,s,a={monsters:[],collectables:[]},t=Q.clientWidth/c;return null!==e&&(i=F[y]*t,s=F[p]*t,e.forEach(function(t){var e=Bt(t,l);It(o,e,i+s)&&Z.classList.contains(ct)&&(o.x<e.x&&!Z.classList.contains(it)||o.x>e.x&&Z.classList.contains(it))&&a.monsters.push(t)})),null!==n&&n.forEach(function(t){var e=Bt(t,l);It(o,e,F[w])&&a.collectables.push(t)}),a},It=function(t,e,n){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<=n},Bt=function(t,e){var n=t.getBoundingClientRect();return{x:n.left+t.scrollLeft-(e.left+Q.scrollLeft)+.5*n.width,y:n.top+t.scrollTop-(e.top+Q.scrollTop)+.5*n.height}},Ft=function(t){t.forEach(function(t){t.classList.contains(dt)||(t.classList.add(dt),F[x]&&setTimeout(function(){t.remove()},F[S]),null!==F[P]&&setTimeout(F[P],0),Qt(F[b]))})},qt=function(t){var l=Q.clientWidth<c;t.forEach(function(t){var e,n;t.classList.contains(pt)||(n=window.getComputedStyle(t).getPropertyValue("transition"),t.classList.add(pt),t.style.transition=n+", "+U,l&&(console.log("resized hit"),window.getComputedStyle(t),t.style.width=null,t.style.height=null,t.style.bottom=null,t.style.top=null,e=Q.clientWidth/c,t.style.width=t.clientWidth*e+"px",t.style.height=t.clientHeight*e+"px",n=parseFloat(window.getComputedStyle(t).getPropertyValue("bottom")),t.style.bottom=n*e+"px",t.style.top="auto",t.style.left="auto"),t.style.right=window.getComputedStyle(t).getPropertyValue("right"),F[v]&&setTimeout(function(){t.remove()},F[C]),null!==F[T]&&setTimeout(F[T],0),Qt(F[g]))})},zt=function(){var t=oe();t.classList.add(mt,lt,st),Q.appendChild(t);t=oe();t.classList.add(mt,lt,ot),Q.appendChild(t);t=oe();t.classList.add(mt,lt,at),Q.appendChild(t);t=oe();t.classList.add(mt,lt,ct),Q.appendChild(t)},Gt=function(e){for(var t in e)t in A&&(e[A[t]]=e[t]);for(var n=0;n<I.length;n++){var l=I[n];if(void 0!==e[l]){let t=e[l];l!==s&&l!==a||(t=Xt(e[l])),F[l]=t}}},Xt=function(t){let e=t;return Array.isArray(t)||"string"!=typeof t||(e=[t]),e},Ut=function(){var n,t,e=c/i,l=c,o=c;document.documentElement.clientWidth<c&&(l=document.documentElement.clientWidth),document.documentElement.clientHeight<i&&(o=document.documentElement.clientHeight*e),l<c||o<c?(t=(o=l<o?l:o)/e,n=o/c,Q.style.width=o+"px",Q.style.height=t+"px",K.style.width=o+"px",K.style.height=t+"px",Z.style.width=null,Z.style.height=null,Z.style.bottom=null,Z.style.top=null,Z.style.left=null,Z.style.right=null,Z.style.width=Z.clientWidth*n+"px",Z.style.height=Z.clientHeight*n+"px",t=parseFloat(window.getComputedStyle(Z).getPropertyValue("bottom")),Z.style.bottom=t*n+"px",Z.style.top="auto",Z.style.right="auto",Z.style.left=parseFloat(window.getComputedStyle(Z).getPropertyValue("left"))*n+"px",null!==(t=document.querySelectorAll(".npc"))&&t.forEach(function(t){t.style.width=null,t.style.height=null,t.style.bottom=null,t.style.top=null,t.style.width=t.clientWidth*n+"px",t.style.height=t.clientHeight*n+"px";var e=parseFloat(window.getComputedStyle(t).getPropertyValue("bottom"));t.style.bottom=e*n+"px",t.style.top="auto"})):(K.style.width=null,K.style.height=null,Q.style.width=K.clientWidth+"px",Q.style.height=K.clientHeight+"px",Z.style.width=null,Z.style.height=null,Z.style.bottom=null,Z.style.top=null,Z.style.left=null,(Z.style.right=null)!==(t=document.querySelectorAll(".npc"))&&t.forEach(function(t){t.style.width=null,t.style.height=null,t.style.bottom=null,t.style.top=null}))},Vt=function(){Z.classList.remove(lt),Z.classList.remove(ot),Z.classList.remove(st),jt(Z),Z.classList.add(lt,at)},Dt=function(){Z.className="",jt(Z),Z.classList.add(lt,ct)},Ot=function(){Z.className="",jt(Z),Z.classList.add(lt,st)},Yt=function(){Ot()},jt=function(t){t.style.animaton="none",t.offsetHeight,t.style.animation=""},Jt=function(){var t,e=Math.random();e<.1?(Yt(),setTimeout(function(){Jt()},1e3)):(e=Math.random())<.5?(t=(t=.5*Z.clientWidth)+Math.round(Math.random()*(Q.clientWidth-2*t)),gt(t)):e<.75?(t=Math.random(),e=Z.getBoundingClientRect().left+Z.scrollLeft,vt(t<.33?e-300:t<.66?e:e+300)):Ct(.5*Q.clientWidth)},Kt=function(){var t,e,n,l,o;document.querySelectorAll(".npc").length>=F[f]||((t=oe()).classList.add(rt),1<F[u]&&(t.classList.add("npc-type-"+X),++X===F[u]&&(X=0)),Q.appendChild(t),e=window.getComputedStyle(t),o=-50-t.clientWidth,t.style.right=o+"px",Q.clientWidth<c&&(l=Q.clientWidth/c,t.style.width=t.clientWidth*l+"px",t.style.height=t.clientHeight*l+"px",t.style.top="auto",n=parseFloat(e.getPropertyValue("bottom")),t.style.bottom=n*l+"px"),n=null===F[h]||isNaN(parseFloat(F[h]))?Q.clientWidth+t.clientWidth+10:F[h]*document.documentElement.clientWidth/c,l=Math.abs(o-n),o=F[d],document.documentElement.clientWidth<c&&(o*=document.documentElement.clientWidth/c),t.style.transition="right "+(o=l/o*1e3)+"ms linear",t.style.right=n+"px",null===F[h]&&setTimeout(function(){t.classList.contains(pt)||t.remove()},o),null!==F[R]&&setTimeout(F[R],0))},Zt=function(t){ht||(Q.removeEventListener("mousedown",bt),ht=!0);var e=t.touches[0].clientX-(t.target.getBoundingClientRect().left+Q.scrollLeft),n=t.touches[0].clientY-(t.target.getBoundingClientRect().top+Q.scrollTop),l=1<t.touches.length;return Lt(t.target,e,n,l),!1},Qt=function(t){G+=t,_t(),null!==F[e]&&G>=F[e]&&$t()},$t=function(){clearInterval(yt),yt=null,setTimeout(function(){document.querySelectorAll("."+nt).forEach(function(t,e,n){t.style.opacity="1",t.style["pointer-events"]="auto"})},500)},_t=function(){_.textContent=G},te=function(){window.addEventListener("resize",xt)},ee=function(){document.addEventListener("keydown",wt),Q.addEventListener("mousedown",bt),Q.addEventListener("touchstart",Zt)},ne=function(){[W,R,T,N,k,E].forEach(function(t){null===F[t]||le(F[t])||(F[t]=null,console.log("**ERROR: The variable you set for "+t+" is not a function"))})},le=function(t){return t&&"[object Function]"==={}.toString.call(t)},oe=function(){return document.createElement("div")},ie=function(){return document.createElement("a")},se=function(t,e){for(var n in e)t.style[n]=e[n]}};